
# Document Digitizer ğŸš€

A modern full-stack application for document digitization with OCR capabilities, featuring:
- **React 19 + TypeScript** frontend with Vite
- **FastAPI** backend with Python
- **Bilingual support** (English/Arabic) with RTL layout
- **Interactive text detection** with bounding boxes
- **Real-time image processing** and text extraction

## ğŸŒŸ Features

- ğŸ“„ **Document Upload**: Drag & drop or click to upload PDF, PNG, JPG, JPEG
- ğŸ” **Text Extraction**: AI-powered OCR with configurable classifier
- ğŸ–¼ï¸ **Interactive Preview**: Canvas overlay with clickable text regions
- ğŸŒ **Bilingual Interface**: Full English/Arabic support with RTL
- ğŸ“± **Responsive Design**: Mobile-friendly modern UI
- âš¡ **Real-time Processing**: Live feedback and progress indicators

## ğŸš€ Quick Start

### Prerequisites
- Python 3.8+
- Node.js 20+
- npm or yarn

### 1. Clone and Setup
```bash
git clone <repository-url>

# Create Python virtual environment
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# Install Python dependencies
pip install -r requirements.txt

# Install frontend dependencies
cd frontend-react
npm install
cd ..
```

### 2. Development Mode (Recommended)

**Option A: Python Run Script (Recommended)**
```bash
python run.py
```

**Option B: Platform-Specific Scripts**
```bash
# Windows
dev.bat

# Linux/macOS
./dev.sh
```

**Option C: Frontend npm Script**
```bash
cd frontend-react
npm run start:full
```

**Option D: Simple Backend Start**
```bash
python start.py
# Then in another terminal: cd frontend-react && npm run dev
```

**Option E: Manual (Two Terminals)**
```bash
# Terminal 1: Backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# Terminal 2: Frontend
cd frontend-react
npm run dev
```

All options will give you:
- ğŸ”§ Backend: http://localhost:8000
- ğŸ“± Frontend: http://localhost:5173
- ğŸ“š API Docs: http://localhost:8000/docs

### 3. Production Mode

**Option A: Automatic Build & Start**
```bash
python start.py prod
```

**Option B: Frontend npm Script**
```bash
cd frontend-react
npm run build:production
```

**Option C: Manual**
```bash
# Build frontend
cd frontend-react
npm run build
cd ..

# Start production server
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## ğŸ“ Project Structure

```
â”œâ”€â”€ app/                     # FastAPI Backend
â”‚   â”œâ”€â”€ main.py             # Main application (serves React SPA)
â”‚   â”œâ”€â”€ api.py              # API routes (/api/*)
â”‚   â”œâ”€â”€ config.py           # Configuration settings
â”‚   â””â”€â”€ static/img/         # Images (backward compatibility)
â”œâ”€â”€ frontend-react/         # React Frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ DocumentDigitizer.tsx   # Main document processing component
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â””â”€â”€ documentStore.ts        # Zustand store for state management
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useI18n.ts              # Internationalization utilities
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeView.tsx            # Home page with DocumentDigitizer
â”‚   â”‚   â”‚   â””â”€â”€ AboutView.tsx           # About page
â”‚   â”‚   â””â”€â”€ router/         # React Router configuration
â”‚   â”œâ”€â”€ public/images/      # Static images for frontend
â”‚   â”œâ”€â”€ package.json        # Frontend dependencies and scripts
â”‚   â””â”€â”€ vite.config.ts      # Vite build configuration
â”œâ”€â”€ dist/                   # Built frontend (generated by npm run build)
â”œâ”€â”€ run.py                  # Development server script (both backend + frontend)
â”œâ”€â”€ start.py               # Simple backend starter script
â”œâ”€â”€ build.py               # Build helper script
â”œâ”€â”€ Dockerfile             # Multi-stage Docker build
â”œâ”€â”€ .dockerignore          # Docker build optimization
â””â”€â”€ docker-build.*         # Docker build scripts
```

## ğŸ› ï¸ Available Scripts

### Development Scripts
```bash
python run.py              # Start both servers with monitoring (recommended)
python start.py            # Start backend only (simple)
python start.py prod       # Build and start production
python build.py dev        # Alternative dev server starter
python build.py build     # Build for production

# Platform-specific
dev.bat                    # Windows batch file (Unicode-safe)
./dev.sh                   # Linux/macOS shell script
```

### Frontend Scripts
```bash
cd frontend-react

npm run dev                 # Start Vite dev server
npm run build              # Build for production
npm run preview            # Preview production build
npm run lint               # Run ESLint
npm run format             # Format with Prettier
npm run type-check         # TypeScript type checking

# Combined scripts
npm run start:full         # Start both backend and frontend
npm run start:backend      # Start only backend
npm run build:production   # Build and start production server
```

### Backend Scripts
```bash
uvicorn app.main:app --reload              # Development
uvicorn app.main:app --host 0.0.0.0 --port 8000  # Production
```

## ğŸ”§ Configuration

### Environment Variables
- `RQMNH_API_URL`: External API endpoint for text extraction
- `DEBUG`: Enable debug mode (default: True)
- `CORS_ORIGINS`: Allowed CORS origins

### Backend Configuration
Edit `app/config.py` for backend settings.

### Frontend Configuration
Edit `frontend-react/vite.config.ts` for build and development settings.

## ğŸŒ API Endpoints

- `POST /api/extract` - Document text extraction
- `GET /static/*` - Static files (legacy)
- `GET /` - React SPA (production mode)
- `GET /docs` - API documentation (Swagger UI)

## ğŸ³ Docker

The Dockerfile uses multi-stage build to create an optimized production image:

**Quick Build & Run:**
```bash
# Windows
docker-build.bat

# Linux/macOS
./docker-build.sh

# Or manually:
docker build -t document-digitizer:latest .
docker run -p 8000:8000 document-digitizer:latest
```

**What the Docker build does:**
1. **Stage 1**: Builds React frontend with Node.js 20
2. **Stage 2**: Creates Python backend with built frontend assets
3. **Security**: Runs as non-root user
4. **Health checks**: Built-in health monitoring
5. **Optimization**: Multi-stage build reduces final image size

**Environment Variables:**
```bash
# Optional environment variables
docker run -p 8000:8000 \
  -e RQMNH_API_URL=https://your-api.com \
  -e DEBUG=false \
  document-digitizer:latest
```

## ğŸ”„ Migration from Legacy

This project has been upgraded from plain HTML/CSS/JS to React:

### âœ… Migrated Features
- Document upload interface â†’ React component
- Canvas text detection â†’ Reactive React component
- Language switching â†’ React hook
- State management â†’ Zustand store
- Styling â†’ React components with Tailwind CSS

### ğŸ”™ Backward Compatibility
- Legacy `/static/` routes still work
- API endpoints unchanged
- Falls back to HTML views if `dist/` doesn't exist

## ğŸš€ Technology Stack

### Frontend
- **React 19** - Modern JavaScript library for building user interfaces
- **TypeScript** - Type-safe JavaScript
- **Vite** - Fast build tool and dev server
- **Zustand** - Lightweight state management
- **React Router** - SPA routing
- **Lucide React** - Icon system

### Backend
- **FastAPI** - Modern Python web framework
- **Uvicorn** - ASGI server
- **Pydantic** - Data validation
- **CORS middleware** - Cross-origin requests

## ğŸ“± Browser Support

- Modern browsers supporting ES2020+
- Mobile responsive design
- RTL language support for Arabic

## ğŸ› Troubleshooting

### Common Issues

1. **Port already in use**:
   ```bash
   # Kill process on port 8000
   lsof -ti:8000 | xargs kill -9  # macOS/Linux
   netstat -ano | findstr :8000   # Windows
   ```

2. **Unicode/Special characters displaying incorrectly**:
   - `python run.py`
   - Or use `dev.bat` on Windows (sets proper encoding)
   - Characters like âœ, âš¡, ğŸ”¥ may show as ï¿½ or boxes

3. **Frontend not building**:
   ```bash
   cd frontend-react
   rm -rf node_modules package-lock.json
   npm install
   ```

4. **API calls failing**:
   - Check backend is running on port 8000
   - Verify CORS settings in `app/main.py`
   - Check network proxy settings

5. **Dependencies issues**:
   ```bash
   # Python
   pip install --upgrade -r requirements.txt
   
   # Node.js
   cd frontend-react && npm install
   ```

## ğŸ“„ Documentation

- **API Documentation**: http://localhost:8000/docs (when running)
- **React Guide**: https://react.dev/
- **FastAPI Guide**: https://fastapi.tiangolo.com/

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests and linting
5. Submit a pull request

---

**Made with â¤ï¸ using FastAPI + React**
